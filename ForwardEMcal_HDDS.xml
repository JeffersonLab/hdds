<?xml version="1.0" encoding="UTF-8"?>
<!--DOCTYPE HDDS>

  Hall D Geometry Data Base: Forward EM calorimeter
  **************************************************

     version 1.0: Initial version	-rtj
 
<HDDS specification="v1.0" xmlns="http://www.gluex.org/hdds">
-->

<section name        = "ForwardEMcal"
         version     = "2.1"
         date        = "2006-11-25"
         author      = "R.T. Jones"
         top_volume  = "FCAL"
         specification = "v1.0">

<!-- Origin of ForwardEMcal is center of upstream face of LGD -->

<!-- Thr Jan 29 08:14:30 EST 2009                                  -->
<!-- changed order of counting columns: 0-58 from south to north   -->

<!-- July 7, 2017, Richard Jones                                   -->
<!-- Added front steel frame and side straps to the LGD blocks.    -->
<!-- Added mylar wrapping around the blocks.                       -->
<!-- Increased the size of the FCAL block unit cell to account for
     the space needed for wrapping, strips, and front frame.       -->
<!-- Added plexiglass sheet (0.5") in front of the LGD.            -->
<!-- Extended the stainless tube around the beam hole to the full 
     length (32.75") shown in the drawings, with front flush with
     the front of the wrapped blocks.                              -->

<!-- July 7, 2017, Richard Jones                                   -->
<!-- Added light cover in front of entrance face to the FCal       -->

<!-- version 2.1, January 8, 2019, Richard Jones                   -->
<!-- Small tweaks to eliminate overlaps between volumnes.          -->

  <composition name="ForwardEMcal">
    <posXYZ volume="forwardEMcal" X_Y_Z="0.0  0.0  25.4" />
    <posXYZ volume="plexiSheet" X_Y_Z="0.0  0.0  -1.0" />
    <posXYZ volume="FCLC" X_Y_Z="0.0  0.0  -2.0" />
    <posXYZ volume="FCBX" X_Y_Z="0.0  0.0  50.8" />
  </composition>

  <composition name="forwardEMcal" envelope="FCAL">
    <apply region="nullBfield"/>  
    <posXYZ volume="LeadTungstateLower" X_Y_Z="0.0 -21.945 -2.9 "/>
    <posXYZ volume="LeadTungstateSouth" X_Y_Z="-21.945 0. -2.9 "/>
    <posXYZ volume="LeadTungstateNorth" X_Y_Z="21.945 0. -2.9 "/>
    <posXYZ volume="LeadTungstateUpper" X_Y_Z="0.0 21.945 -2.9 "/>    
    <posXYZ volume="LGDlower" X_Y_Z="  0.0 -80.2777  0.0" />
    <posXYZ volume="LGDsouth" X_Y_Z="-80.2777   0.0  0.0" />
    <posXYZ volume="LGDnorth" X_Y_Z="+80.2777  0.0  0.0" />
    <posXYZ volume="LGDupper" X_Y_Z="  0.0 +80.2777  0.0" />
    <posXYZ volume="FCBI" X_Y_Z="0.0  0.0  -2.9" /> 
    <posXYZ volume="TABS" X_Y_Z="0.0  0.0  -17.17" /> 
    <!--posXYZ volume="ROHA" X_Y_Z="0.0  0.0  -19.785" /--> 
    <posXYZ volume="INTU" X_Y_Z="0.0  0.0  -1.67" />     
  </composition>

  <composition name="LeadTungstateLower" envelope="LTLW">
    <mposY volume="LeadTungstateFullRow" ncopy="19" Z_X="0.0 0.0" Y0="-18.81" dY="2.09">
      <row value="100" step="1" />
    </mposY>
  </composition>

  <composition name="LeadTungstateNorth" envelope="LTNO">
    <mposY volume="LeadTungstateHalfRowNorth" ncopy="2" Y0="-1.045" dY="2.09">
      <row value="119" step="1" />
    </mposY>
  </composition>

  <composition name="LeadTungstateSouth" envelope="LTSO">
    <mposY volume="LeadTungstateHalfRowSouth" ncopy="2" Y0="-1.045" dY="2.09">
      <row value="119" step="1" />
    </mposY>
  </composition>

  <composition name="LeadTungstateUpper" envelope="LTUP">
    <mposY volume="LeadTungstateFullRow" ncopy="19" Z_X="0.0 0.0" Y0="-18.81" dY="2.09">
      <row value="121" step="1" />
    </mposY>
  </composition>

  <composition name="LeadTungstateFullRow">
    <mposX volume="LTBLwrapped" ncopy="40" Y_Z="0.0 0.0" X0="-40.755" dX="2.09">
      <column value="100" step="1" />
    </mposX>
  </composition>

  <composition name="LeadTungstateHalfRowNorth">
    <mposX volume="LTBLwrapped" ncopy="19" Y_Z="0.0 0.0" X0="-18.81" dX="2.09">
      <column value="121" step="1" />
    </mposX>
  </composition>

  <composition name="LeadTungstateHalfRowSouth">
    <mposX volume="LTBLwrapped" ncopy="19" Y_Z="0.0 0.0" X0="-18.81" dX="2.09">
      <column value="100" step="1" />
    </mposX>
  </composition>

  <composition name="LGDlower" envelope="LGDB">
    <mposY volume="LGDfullRow" ncopy="19" Z_X="0.0 0.0" Y0="-36.1413" dY="4.0157">
      <row value="0" step="1" />
    </mposY>
  </composition>

  <composition name="LGDnorth" envelope="LGDN">
    <mposY volume="LGDhalfRowNorth" ncopy="21" Y0="-40.157" dY="4.0157">
      <row value="19" step="1" />
    </mposY>
  </composition>

  <composition name="LGDsouth" envelope="LGDS">
    <mposY volume="LGDhalfRowSouth" ncopy="21" Y0="-40.157" dY="4.0157">
      <row value="19" step="1" />
    </mposY>
  </composition>

  <composition name="LGDupper" envelope="LGDT">
    <mposY volume="LGDfullRow" ncopy="19" Z_X="0.0 0.0" Y0="-36.1413" dY="4.0157">
      <row value="40" step="1" />
    </mposY>
  </composition>
  <composition name="LGDfullRow">
    <mposX volume="LGDblock" ncopy="59" Y_Z="0.0 0.0" X0="-116.4553" dX="4.0157">
      <column value="0" step="1" />
    </mposX>
  </composition>

  <composition name="LGDhalfRowNorth">
    <mposX volume="LGDblock" ncopy="19" Y_Z="0.0 0.0" X0="-36.1413" dX="4.0157">
      <column value="40" step="1" />
    </mposX>
  </composition>

  <composition name="LGDhalfRowSouth">
    <mposX volume="LGDblock" ncopy="19" Y_Z="0.0 0.0" X0="-36.1413" dX="4.0157">
      <column value="0" step="1" />
    </mposX>
  </composition>

  <composition name="LGDblock" envelope="LGBU">
    <posXYZ volume="LGBLwrapped" X_Y_Z="-0.0038 -0.0038 -2.600"/>
    <posXYZ volume="LGBS" X_Y_Z="2.00405 0 0"/>
    <posXYZ volume="LGBS" X_Y_Z="0 2.00405 0" rot="0 0 90"/>
    <posXYZ volume="LGBF" X_Y_Z="-0.0038 -0.0038 -25.100"/>
    <posXYZ volume="LGLG" X_Y_Z="-0.0038 -0.0038  22.450"/>
  </composition>

  <composition name="LGBLwrapped" envelope="LGBW">
    <posXYZ volume="LGBL"/>
  </composition>  

  <composition name="LTBLwrapped" envelope="LTM1">
    <posXYZ volume="LTB1"/>
  </composition>

  <box name="FCAL" X_Y_Z="236.9263  236.9263  50.8"  material="Air"
	                              	comment="forward EMcal mother" />
  <box name="LGDB" X_Y_Z="236.9263  76.2983  50.8"  material="Air"
					comment="LGD bottom section"   />
  <box name="LGDT" X_Y_Z="236.9263  76.2983  50.8"  material="Air"
					comment="LGD top section"      />
  <box name="LGDN" X_Y_Z="76.2983   84.3297  50.8"  material="Air"
					comment="LGD north section"     />
  <box name="LGDS" X_Y_Z="76.2983   84.3297  50.8"  material="Air"
					comment="LGD south section"    />
  <box name="LGBU" X_Y_Z="4.0157  4.0157  50.8"  material="Air"
		            comment="lead glass block stacking unit cell"/>
  <box name="LGBL" X_Y_Z="4.0030  4.0030  45.0"  material="leadGlassF800"
		sensitive="true" comment="lead glass block" />
  <tubs name="LGLG" Rio_Z="0.0  1.5875  5.08" material="Plexiglas"
		sensitive="true" comment="lead glass block plexiglass light guide" />
  <box name="LGBW" X_Y_Z="4.0081  4.0081  45.0"  material="Mylar"
		            comment="aluminized mylar wrapping around the block"/>
  <box name="LGBS" X_Y_Z="0.0076 2.8575 50.8" material="StainlessSteel"
		            comment="SS strap holding the tube assy to the block"/>
  <pgon name="LGBF" segments="4" profile="-45 360" material="StainlessSteel"
		            comment="SS frame fixing the straps to the front of the block">
   <polyplane Rio_Z="1.5875 2.0015 -0.300"/>
   <polyplane Rio_Z="1.5875 2.0015 0.000"/>
  </pgon>
  <pgon name="FCBI" segments="4" profile="-45 360" material="StainlessSteel"
                    comment="FCal beam hole support insert">
   <polyplane Rio_Z="1.89 2.09  -10.0"/>
   <polyplane Rio_Z="1.89 2.09  +10.0"/>
  </pgon>
  <pgon name="FCBX" segments="4" profile="-45 360" material="StainlessSteel"
                    comment="FCal beam hole support extension">
   <polyplane Rio_Z="4.7536 6.0236   0.000"/>
   <polyplane Rio_Z="4.7536 6.0236  32.385"/>
  </pgon>

  <pgon name="TABS" segments="4" profile="-45 360" material="Tungsten"
                    comment="Tungsten absorber">
   <polyplane Rio_Z="1.89 5.225  -3.0"/>
   <polyplane Rio_Z="1.89 5.225  +3.0"/>
  </pgon>


  <composition name="plexiSheet" envelope="LGPS">
    <posXYZ volume="LGPH"/>
  </composition>
  <tubs name="LGPS" Rio_Z="0.0  123.190  1.270" material="Plexiglas"/>
  <box name="LGPH" X_Y_Z="85.00 85.00 1.270" material="Air"/>
  <box name="FCLC" X_Y_Z="243.8 243.8 0.3175" material="ABS-PVC"/>

  <pgon name="ROHA" segments="4" profile="-45 360" material="HighDensityROHACELL"
                    comment="Rohacell plug inside FCAL">
   <polyplane Rio_Z="5.225 41.8  -5.615"/>
   <polyplane Rio_Z="5.225 41.8  +5.615"/>
  </pgon>

  <box name="LTM1" X_Y_Z="  2.09    2.09   20.0"  material="Tedlar"
       comment="lead tungstate module assembly"     />
  <box name="LTB1" X_Y_Z="  2.055    2.055  20.0"  material="PWO"
       sensitive="true"	 comment="lead tungstate block"     />


  <box name="LTLW" X_Y_Z="83.6  39.71  20.0"  material="Air"
					comment="PbWO4 bottom section"   />
  <box name="LTUP" X_Y_Z="83.6  39.71  20.0"  material="Air"
					comment="PbWO4 top section"      />
  <box name="LTNO" X_Y_Z="39.71   4.18  20.0"  material="Air"
					comment="PbWO4 north section"     />
  <box name="LTSO" X_Y_Z="39.71   4.18  20.0"  material="Air"
					comment="PbWO4 south section"    />
  <tubs name="INTU" Rio_Z="1.69 1.89 37.0" material="Aluminum" 
	comment="Support tube for tungsten absorber"/>

  <!-- The following elements describe an early rendition of the GlueX
       detector simulated using a fast Monte Carlo program MCFast.  They
       are retained for future reference, do not rely on their values. -->

  <parameters name="forwardEMcal_pars" type="mcfast">
    <real_array	name="xlimit"	comment="xmin  xmax limits of box"
				values="-106.0  106.0"
				unit="cm"	/>
    <real_array	name="ylimit"	comment="ymin  ymax limits of box"
				values="-106.0  106.0"
				unit="cm"	/>
    <real_array	name="xlimit_gap" comment="xmin  xmax of beam hole aperture"
				values="   -6.0   6.0"
				unit="cm"	/>
    <real_array	name="ylimit_gap" comment="ymin  ymax of beam hole aperture"
				values="   -6.0   6.0"
				unit="cm"	/>
    <real	name="z0"	value="620.07"	comment="z of midplane"
				unit="cm"	/>
    <real	name="zlen"	value="45.0"	comment="length of blocks"
				unit="cm"	/>
    <reference	name="material"	value="leadGlassF800" />
    <reference	name="active"	value="leadGlassF800" />
    <int	name="ncr1"	value="58"	comment="x segmentation"     />
    <int	name="ncr2"	value="58"	comment="y segmentation"     />
    <int	name="nlayers"	value="1"	comment="z segmentation"     />
    <real	name="siga_em"	value="0.06"	comment="root-E coefficient"
				unit="cm"	/>
    <real	name="sigb_em"	value="0.01"	comment="floor term"
				unit="cm"	/>
    <real	name="siga_had"	value="0.0"	comment="root-E coefficient"
				unit="cm"	/>
    <real	name="sigb_had"	value="0.0"	comment="floor term"
				unit="cm"	/>
    <real	name="em_had_ratio" value="4.0"	comment="response ratio"
				unit="cm"	/>
  </parameters>

<!-- The forward calorimeter is hard coded into HDFast at present

  <mcfast model="CalorBox" template="db/calorbox.db"
                           parameters="forwardEMcal_pars">
    <string	name="name"	value="FCAL"
    <string	name="shape"	value="BOX"
    <int	name="type"	value="2"
  </mcfast>
-->

</section>

<!-- </HDDS> -->
  
  
