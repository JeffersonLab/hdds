<?xml version="1.0" encoding="UTF-8"?>
<!--DOCTYPE HDDS>

  Hall D Geometry Data Base: Barrel EM calorimeter
  *************************************************

     version 1.0: Initial version  -rtj
     version 1.2: Initial SiPM subsectoring -cx,zp
 
<HDDS specification="v1.0" xmlns="http://www.gluex.org/hdds">
-->

<section name = "BarrelEMcal"
         version = "2.0"
         date = "2006-11-22"
         author = "R.T. Jones"
         top_volume = "BCAL"
         specification = "v1.0">

<!-- Origin of BarrelEMcal is center of upstream end
     of the active region, not including the light guides. -->


  <composition name="BarrelEMcal">
    <posXYZ volume="barrelEMcal" X_Y_Z="0.0 0.0 195.0" />
    <posXYZ volume="BCSU" X_Y_Z="0.0 0.0 -15.0" />
    <posXYZ volume="BCSD" X_Y_Z="0.0 0.0 405." />
  </composition>

  <composition name="barrelEMcal" envelope="BCAL">
    <mposPhi volume="barrelModule" ncopy="48" Phi0="3.75" impliedRot="true">
      <module value="1" step="1" />
    </mposPhi>
  </composition>

  <composition name="barrelModule" envelope="BCAM">
    <apply region="nullBfield"/>
    <posXYZ volume="BCALlayer_1" />
    <posXYZ volume="BCALlayer_2" />
    <posXYZ volume="BCALlayer_3" />
    <posXYZ volume="BCALlayer_4" />
    <posXYZ volume="BCALlayer_5" />
    <posXYZ volume="BCALlayer_6" />
    <posXYZ volume="BCALlayer_7" />
    <posXYZ volume="BCALlayer_8" />
    <posXYZ volume="BCALlayer_9" />
    <posXYZ volume="BCAS" />
  </composition>

  <composition name="BCALlayer_1" envelope="BCL1">
    <mposPhi volume="BCALsector_1" ncopy="4" Phi0="-2.8125"  dPhi="1.875"
                                             impliedRot="true">
      <layer value="1" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition> 

  <composition name="BCALlayer_2" envelope="BCL2">
    <mposPhi volume="BCALsector_2" ncopy="4" Phi0="-2.8125"  dPhi="1.875"
                                             impliedRot="true">
      <layer value="2" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>

  <composition name="BCALlayer_3" envelope="BCL3">
    <mposPhi volume="BCALsector_3" ncopy="4" Phi0="-2.8125"  dPhi="1.875"
                                             impliedRot="true">
      <layer value="3" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>

  <composition name="BCALlayer_4" envelope="BCL4">
    <mposPhi volume="BCALsector_4" ncopy="4" Phi0="-2.8125"  dPhi="1.875"
                                             impliedRot="true">
      <layer value="4" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition> 


  <composition name="BCALlayer_5" envelope="BCL5">
    <mposPhi volume="BCALsector_5" ncopy="4" Phi0="-2.8125"  dPhi="1.875"
                                             impliedRot="true">
      <layer value="5" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>


  <composition name="BCALlayer_6" envelope="BCL6">
    <mposPhi volume="BCALsector_6" ncopy="3" Phi0="-2.5"  dPhi="2.5"
                                             impliedRot="true">
      <layer value="6" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>


  <composition name="BCALlayer_7" envelope="BCL7">
    <mposPhi volume="BCALsector_7" ncopy="3" Phi0="-2.5"  dPhi="2.5"
                                             impliedRot="true">
      <layer value="7" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>

  <composition name="BCALlayer_8" envelope="BCL8">
    <mposPhi volume="BCALsector_8" ncopy="3" Phi0="-2.5"  dPhi="2.5"
                                             impliedRot="true">
      <layer value="8" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>

  <composition name="BCALlayer_9" envelope="BCL9">
    <mposPhi volume="BCALsector_9" ncopy="3" Phi0="-2.5"  dPhi="2.5"
                                             impliedRot="true">
      <layer value="9" />
      <sector value="1" step="1" />
    </mposPhi>
  </composition>


  <composition name="BCALsector_1" envelope="BCS1">
    <posRPhiZ volume="BCM1" />
    <posRPhiZ volume="BCN1" R_Phi_Z="66.0 0.0  197.5" />
    <posRPhiZ volume="BCN1" R_Phi_Z="66.0 0.0 -197.5" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="66.0 0.0  201.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="66.0 0.0 -201.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_2" envelope="BCS2">
    <posRPhiZ volume="BCM2" />
    <posRPhiZ volume="BCN2" R_Phi_Z="68.0 0.0  197.5" />
    <posRPhiZ volume="BCN2" R_Phi_Z="68.0 0.0 -197.5" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="68.0 0.0  201.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="68.0 0.0 -201.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_3" envelope="BCS3">
    <posRPhiZ volume="BCM3" />
    <posRPhiZ volume="BCN3" R_Phi_Z="70.0 0.0  197.5" />
    <posRPhiZ volume="BCN3" R_Phi_Z="70.0 0.0 -197.5" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="70.0 0.0  201.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="70.0 0.0 -201.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_4" envelope="BCS4">
    <posRPhiZ volume="BCM4" />
    <posRPhiZ volume="BCN4" R_Phi_Z="72.0 0.0  197.5" />
    <posRPhiZ volume="BCN4" R_Phi_Z="72.0 0.0 -197.5" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="72.0 0.0  201.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="72.0 0.0 -201.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_5" envelope="BCS5">
    <posRPhiZ volume="BCM5" />
    <posRPhiZ volume="BCN5" R_Phi_Z="74.0 0.0  197.5" />
    <posRPhiZ volume="BCN5" R_Phi_Z="74.0 0.0 -197.5" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="74.0 0.0  201.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="74.0 0.0 -201.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_6" envelope="BCS6">
    <posRPhiZ volume="BCM6" />
    <posRPhiZ volume="BCN6" R_Phi_Z="76.558 0.0  200.0" />
    <posRPhiZ volume="BCN6" R_Phi_Z="76.558 0.0 -200.0" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="76.558 0.0  206.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="76.558 0.0 -206.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_7" envelope="BCS7">
    <posRPhiZ volume="BCM7" />
    <posRPhiZ volume="BCN7" R_Phi_Z="79.673 0.0  200.0" />
    <posRPhiZ volume="BCN7" R_Phi_Z="79.673 0.0 -200.0" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="79.673 0.0  206.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="79.673 0.0 -206.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_8" envelope="BCS8">
    <posRPhiZ volume="BCM8" />
    <posRPhiZ volume="BCN8" R_Phi_Z="82.787 0.0  200.0" />
    <posRPhiZ volume="BCN8" R_Phi_Z="82.787 0.0 -200.0" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="82.787 0.0  206.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="82.787 0.0 -206.0" rot="180 0 0" />
  </composition>

  <composition name="BCALsector_9" envelope="BCS9">
    <posRPhiZ volume="BCM9" />
    <posRPhiZ volume="BCN9" R_Phi_Z="85.903 0.0  200.0" />
    <posRPhiZ volume="BCN9" R_Phi_Z="85.903 0.0 -200.0" rot="180 0 0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="85.903 0.0  206.0" />
    <posRPhiZ volume="BCPM" R_Phi_Z="85.903 0.0 -206.0" rot="180 0 0" />
  </composition>

  <tubs name="BCAL" Rio_Z="65.0 90.0 420.0" unit_length="cm" material="Air"
                                      comment="barrel EMcal mother" />
  <tubs name="BCAM" Rio_Z="65.0 90.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel calorimeter module" />
  <tubs name="BCAS" Rio_Z="87.46 90.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Aluminum" comment="bcal module support bar" />

  <tubs name="BCL1" Rio_Z="65.0 67.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 1" />
  <tubs name="BCS1" Rio_Z="65.0 67.0 420.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 1" />
  <tubs name="BCL2" Rio_Z="67.0 69.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 2" />
  <tubs name="BCS2" Rio_Z="67.0 69.0 420.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 2" />
  <tubs name="BCL3" Rio_Z="69.0 71.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 3" />
  <tubs name="BCS3" Rio_Z="69.0 71.0 420.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 3" />
  <tubs name="BCL4" Rio_Z="71.0 73.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 4" />
  <tubs name="BCS4" Rio_Z="71.0 73.0 420.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 4" />
  <tubs name="BCL5" Rio_Z="73.0 75.0 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 5" />
  <tubs name="BCS5" Rio_Z="73.0 75.0 420.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 5" />
  <tubs name="BCL6" Rio_Z="75.00 78.12 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 6" />
  <tubs name="BCS6" Rio_Z="75.00 78.12 420.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 6" />
  <tubs name="BCL7" Rio_Z="78.12 81.23 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 7" />
  <tubs name="BCS7" Rio_Z="78.12 81.23 420.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 7" />
  <tubs name="BCL8" Rio_Z="81.23 84.35 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 8" />
  <tubs name="BCS8" Rio_Z="81.23 84.35 420.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 8" />
  <tubs name="BCL9" Rio_Z="84.35 87.46 420.0" profile="-3.75 7.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module layer 9" />
  <tubs name="BCS9" Rio_Z="84.35 87.46 420.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="Air" comment="barrel EMcal module sector 9" />

  <tubs name="BCM1" Rio_Z="65.0 67.0 390.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 1" />
  <tubs name="BCM2" Rio_Z="67.0 69.0 390.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 2" />
  <tubs name="BCM3" Rio_Z="69.0 71.0 390.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 3" />
  <tubs name="BCM4" Rio_Z="71.0 73.0 390.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true" 
                          comment="barrel EMcal submodule in ring 4" />
  <tubs name="BCM5" Rio_Z="73.0 75.0 390.0" profile="-0.9375 1.875"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 5" />
  <tubs name="BCM6" Rio_Z="75.00 78.12 390.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 6" />
  <tubs name="BCM7" Rio_Z="78.12 81.23 390.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 7" />
  <tubs name="BCM8" Rio_Z="81.23 84.35 390.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 8" />
  <tubs name="BCM9" Rio_Z="84.35 87.46 390.0" profile="-1.25 2.5"
                    unit_length="cm" unit_angle="deg"
                    material="leadScint" sensitive="true"
                          comment="barrel EMcal submodule in ring 9" />

  <trd name="BCN1" Xmp_Ymp_Z="2.0 1.3 2.127 1.3 5.0" 
       material="Plexiglas" comment="Winston cone for layer 1"/>
  <trd name="BCN2" Xmp_Ymp_Z="2.0 1.3 2.193 1.3 5.0" 
       material="Plexiglas" comment="Winston cone for layer 2"/>
  <trd name="BCN3" Xmp_Ymp_Z="2.0 1.3 2.258 1.3 5.0" 
       material="Plexiglas" comment="Winston cone for layer 3"/>
  <trd name="BCN4" Xmp_Ymp_Z="2.0 1.3 2.323 1.3 5.0" 
       material="Plexiglas" comment="Winston cone for layer 4"/>
  <trd name="BCN5" Xmp_Ymp_Z="2.0 1.3 2.389 1.3 5.0" 
       material="Plexiglas" comment="Winston cone for layer 5"/>
  <trd name="BCN6" Xmp_Ymp_Z="3.12 1.3 3.272 1.3 10.0" 
       material="Plexiglas" comment="Winston cone for layer 6"/>
  <trd name="BCN7" Xmp_Ymp_Z="3.12 1.3 3.408 1.3 10.0" 
       material="Plexiglas" comment="Winston cone for layer 7"/>
  <trd name="BCN8" Xmp_Ymp_Z="3.12 1.3 3.544 1.3 10.0" 
       material="Plexiglas" comment="Winston cone for layer 8"/>
  <trd name="BCN9" Xmp_Ymp_Z="3.12 1.3 3.680 1.3 10.0" 
       material="Plexiglas" comment="Winston cone for layer 9"/>

  <box name="BCPM" X_Y_Z="2.0 2.0 2.0" 
       material="Aluminum" comment="SiPM readout module with cooler"/>

  <pcon name="BCSU" material="SignalCables" comment="upstream readout cables">
    <polyplane Rio_Z="91.8 120. -57.0" />
    <polyplane Rio_Z="88.8 120. -54.0" />
    <polyplane Rio_Z="88.8 93.0 -54.0" />
    <polyplane Rio_Z="85.0 89.2 -50.2" />
    <polyplane Rio_Z="85.0 88.0 -49." />
    <polyplane Rio_Z="85.0 88.0 -10." />
    <polyplane Rio_Z="65.0 88.0 0.0" />
  </pcon>
  <pcon name="BCSD" material="SignalCables" comment="downstream readout cables">
    <polyplane Rio_Z="65.0 88.0 0.0" />
    <polyplane Rio_Z="85.0 88.0 10." />
    <polyplane Rio_Z="85.0 88.0 30." />
  </pcon>

  <!-- The following elements describe an early rendition of the GlueX
       detector simulated using a fast Monte Carlo program MCFast.  They
       are retained for future reference, do not rely on their values. -->

  <parameters name="barrelEMcal_pars" type="mcfast">
    <real_array name="rmin"	comment="upstream, downstream end inner radius"
 				values="   65.0      65.0"
				unit="cm" 	/>
    <real_array name="rmax"	comment="upstream, downstream end outer radius"
                                values="   90.0      90.0"
				unit="cm" 	/>
    <real       name="z0"	value="212.0"	comment="z coord. of midplane"
				unit="cm"	/>
    <real       name="zlen"	value="390.0"	comment="length of counters"
				unit="cm"	/>
    <reference  name="material"	value="leadScint" />
    <reference  name="active"	value="leadScint" />
    <int	name="nphi"	value="48"	comment="phi segmentation" />
    <int	name="neta"	value="1"	comment="longitudinal seg" />
    <int	name="nlayers"	value="1"	comment="radial segmentation" />
    <real       name="siga_em"	value="0.06"	comment="rootE coefficient"
				unit="cm"	/>
    <real       name="sigb_em"	value="0.01"	comment="floor term"
				unit="cm"	/>
    <real       name="siga_had"	value="0.30"	comment="rootE coefficient"
				unit="cm"	/>
    <real       name="sigb_had"	value="0.03"	comment="floor term"
				unit="cm"	/>
    <real       name="em_had_ratio" value="4.0" comment="response ratio"
				unit="cm"	/>
  </parameters>

  <mcfast model="EMCal" template="db/emcal.db" parameters="barrelEMcal_pars">
    <string     name="name"	value="BCAL"	/>
    <string     name="shape"	value="TUBE"	/>
    <int	name="type"	value="1"	/>
  </mcfast>

</section>

<!-- </HDDS> -->
